import{Clock as Rr,Color as zr,Vector3 as kr}from"three";import{Color as xt}from"three";import{Color as je,DataTexture as Wt,Matrix4 as Ht,Mesh as Bt,NearestFilter as qe,PlaneBufferGeometry as Ke,RGBAFormat as jt,RepeatWrapping as $e,Uniform as h,UnsignedByteType as qt,UVMapping as $t,Vector2 as D,Vector4 as Xt,RawShaderMaterial as Zt}from"three";import{Plane as Ue,Ray as Mt,Vector3 as ae}from"three";var Wr=2*Math.PI,Hr=180/Math.PI,Br=Math.PI/180;var jr=new Mt,qr=new Ue(new ae(0,-1,0),1),$r=new Ue(new ae(0,-1,0),1),Xr=new ae;var Zr=Math.PI*2,Jr=Math.PI*3;var Ft=(Math.sqrt(5)+1)*.5-1,Kr=Ft*Math.PI*2;var Ae=(t,e,r=!1)=>{let n=t.indexOf(e);if(n!==-1)t.splice(n,1);else if(r)throw new Error("could not find value in array");return e};var ce=class{get listenerCount(){return this.listeners.length}obj;propName;value;listeners;constructor(e,r){this.propName=r,this.listeners=[],this.setValue=this.setValue.bind(this),this.attach(e)}attach(e){this.obj&&this.release(),this.obj=e;let r=this.obj[this.propName];Object.defineProperty(e,this.propName,{configurable:!0,set:this.setValue,get:()=>this.value}),this.setValue(r)}release(){Object.defineProperty(this.obj,this.propName,{value:this.value,writable:!0})}hasListener(e){return this.listeners.indexOf(e)!==-1}addListener(e,r=!0){r&&e(this.value,void 0),this.listeners.push(e)}removeListener(e){Ae(this.listeners,e)}setValue(e){if(this.value===e)return;let r=this.value;this.value=e;for(let n of this.listeners)n(e,r)}},z=new Map;function It(t){return z.has(t)||z.set(t,new Map),z.get(t)}function Lt(t,e){let r=It(t);return r.has(e)||r.set(e,new ce(t,e)),r.get(e)}function j(t,e,r,n=!0){Lt(t,e).addListener(r,n)}function U(t,e,r){let n=z.get(t);if(n){let o=n.get(e);o&&(o.removeListener(r),o.listenerCount===0&&(o.release(),n.delete(e))),n.size===0&&z.delete(t)}}import{DataTexture as Ut,RGBAFormat as At,UnsignedByteType as Ot}from"three";var le;function Oe(){if(!le){let r=new Uint8Array(64);for(let n=0;n<64;n++)r[n]=0;le=new Ut(r,4,4,At,Ot)}return le}var Ee="precision highp float;uniform sampler2D fontTexture;uniform sampler2D layoutTexture;uniform vec3 color;uniform vec3 strokeColor;uniform vec2 fontSizeInChars;varying vec2 vUv;varying vec2 vUvCharCols;void main(){vec4 layoutTexel=texture2D(layoutTexture,vec2(vUv.x,1.0-vUv.y));vec2 fontCharIndices=layoutTexel.xz*vec2(255.0001);vec4 layoutCharUv=fract(vUvCharCols).xyxy;layoutCharUv.xz=fract(layoutCharUv.xz-layoutTexel.yw);vec2 tA=mod(fontCharIndices,fontSizeInChars.x);vec2 tB=vec2(fontSizeInChars.y-1.0)-floor(fontCharIndices/fontSizeInChars.x);vec4 packedAB=vec4(tA.x,tB.x,tA.y,tB.y);vec4 fontCharIndexUv=(layoutCharUv+packedAB)/fontSizeInChars.xyxy;vec4 texel=texture2D(fontTexture,fontCharIndexUv.xy);vec4 texel2=texture2D(fontTexture,fontCharIndexUv.zw);vec4 final=max(texel,texel2);if(final.a<0.5)discard;vec3 finalColor=mix(strokeColor,color,final.r);gl_FragColor=vec4(finalColor.rgb,1.0);}";import{Color as v}from"three";var Re=new v(0),ze=new v(16777215),un=new v(6750054),pn=new v(2273279),ke=new v(6750054),mn=new v(16711680),hn=new v(16050242);import{NearestFilter as Ge}from"three";import{FileLoader as Rt,LoadingManager as zt,TextureLoader as kt}from"three";var De=new zt,ue;function Dt(){return ue||(ue=new Rt(De)),ue}var pe;function Vt(){return pe||(pe=new kt(De)),pe}async function me(t){return new Promise((e,r)=>Dt().load(t,n=>e(n),void 0,r))}var k=new Map;async function Ve(t,e){let r;return k.has(t)?r=new Promise((n,o)=>{k.get(t).push(n)}):r=new Promise((n,o)=>{k.set(t,[n]);let a=l=>{l.name=t,e!==void 0&&(l.flipY=e),k.get(t).forEach(I=>I(l)),k.delete(t)};Vt().load(t,a,void 0,o)}),r}function he(t,e){return`${t}.${e}`}var g=class{constructor(e,r=7,n=8){this.name=e;this.maxCharPixelWidth=r;this.charPixelHeight=n}font;pixelWidths;texture;_initd=!1;async init(){if(this._initd)return;this._initd=!0,this.texture=await Ve(he(this.name,"png")),this.texture.minFilter=Ge,this.texture.magFilter=Ge;let e=(await me(he(this.name+"_char-widths","txt"))).split(`
`).join(""),r=[];for(let n=0;n<e.length;n++)r[n]=parseInt(e[n]);this.pixelWidths=r,this.font=(await me(he(this.name,"txt"))).split(`
`).join("")}},Ne={cdogs_font_7x8:new g("pixelFonts/cdogs_font_7x8",7,8),good_neighbors:new g("pixelFonts/good_neighbors",11,16)};var We={fontFace:Ne.cdogs_font_7x8,align:0,vAlign:0,color:ze,letterSpacing:-1,strokeColor:Re,scaleDownToPhysicalSize:!0,screenSpace:!1,constantSizeOnScreen:!1,prescale:1},Gt={...We,color:ke},He={generic:We,title:Gt};var Be=`uniform vec2 alignment;
#ifdef USE_SCREENSPACE
uniform float prescale;uniform vec4 clipSpacePosition;uniform vec2 pixelSizeInClipSpace;
#else
uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;
#endif
attribute vec3 position;attribute vec2 uv;varying vec2 vUv;varying vec2 vUvCharCols;uniform vec2 layoutSizeInChars;void main(){vUv=uv;vUvCharCols=uv*layoutSizeInChars;
#ifdef USE_SCREENSPACE
vec2 finalOffset=(position.xy-alignment)*pixelSizeInClipSpace*prescale*layoutSizeInChars;
#ifdef CONSTANT_SIZE_ON_SCREEN
finalOffset*=clipSpacePosition.w;
#endif
gl_Position=clipSpacePosition;gl_Position.xy+=finalOffset;
#else
vec3 pos=position;pos.xy-=alignment;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.0);
#endif
}`;var Xe=new Ht,fe=[];function Jt(t){if(!t)return-1;let e=fe.indexOf(t);return e===-1?(fe.push(t),fe.length-1):e}var Kt=2048,_=class extends Bt{constructor(r="",n=He.generic,o,a,l=!0){super(Je(r,n),Yt(n));this._text=r;this.settings=n;this.onMeasurementsUpdated=o;this.onCharSizeUpdated=a;this.optimizeRenderOrder=l;j(n,"fontFace",this.onFontFaceChange,!0)}width=0;height=0;dirty=!1;livePropObject;livePropName;_fontFace;_newTexture;_newFontString;get text(){return this._text}set text(r){this._text!==r&&(this._text=r,this.dirty=!0)}onFontFaceChange=(r,n)=>{n&&(U(n,"texture",this.onFontTextureUpdate),U(n,"font",this.onFontUpdate)),j(r,"texture",this.onFontTextureUpdate),j(r,"font",this.onFontUpdate),r.init(),this._fontFace=r};onFontTextureUpdate=r=>{this._newTexture=r,this.dirty=!0};onFontUpdate=r=>{this._newFontString=r,this.dirty=!0};onBeforeRender=(r,n,o,a,l,I)=>{if(this.settings.screenSpace){let s=this.material.uniforms.clipSpacePosition.value;Xe.multiplyMatrices(o.matrixWorldInverse,this.matrixWorld).premultiply(o.projectionMatrix),s.set(0,0,0,1).applyMatrix4(Xe)}if(this.dirty){this.dirty=!1,this.regenerateGeometry();let s=this.material;if(this._newTexture&&(this.optimizeRenderOrder&&(this.renderOrder=this.renderOrder||100+Jt(this._newTexture)),s.uniforms.fontTexture.value=this._newTexture,this._newTexture=void 0),this._newFontString&&this._text){let p=this.text.split(`
`).slice(0,Kt),m=p.length,u=this.settings.fontFace,f=u.maxCharPixelWidth,re=u.font,ne=u.pixelWidths,R=-this.settings.letterSpacing,Le=s.uniforms.fontTexture.value.image;s.uniforms.fontSizeInChars.value.set(Le.width/u.maxCharPixelWidth,Le.height/u.charPixelHeight);let oe=re.indexOf("\u25A1");if(oe===-1)throw new Error("Please include this character \u25A1 in your font, to stand in for other missing characters");let ie="",yt=p.map(d=>{let T=0;for(let x=0;x<d.length;x++){let C=d[x];if(C==null)continue;let W=re.indexOf(C);W===-1?(T+=f-ne[oe]-R,ie.includes(C)||(ie+=C)):T+=f-ne[W]-R}return T+R});console.warn("Characters in text not found in font: "+ie);let L=yt.reduce((d,T)=>Math.max(d,T),0),vt=L*m,w=new Uint8Array(vt*4);for(let d=0;d<m;d++){let T=d*L,x=0,C=p[d],W=C.length;for(let H=0;H<=W;H++){let se=C[H],_t=C[H-1];if(!se&&!_t)continue;let B=re.indexOf(se);B===-1&&se!==void 0&&(B=oe);let Pt=f-ne[B];for(let S=0;S<Pt;S++){let y=(T+x)*4;w[y]=B,w[y+1]=(x-S)/f%1*255,x++}x-=R;for(let S=0;S<R;S++){let y=(T+x+S)*4;w[y+2]=w[y],w[y+3]=w[y+1]}}}s.uniforms.layoutSizeInChars.value.set(L/f,m),s.uniforms.layoutSizeInCharColumns.value.set(L,m),s.uniforms.layoutTexture.value=new Wt(w,L,m,jt,qt,$t,$e,$e,qe,qe),this._newFontString=void 0,this.onCharSizeUpdated&&this.onCharSizeUpdated(L/f,m)}}};updateText=(r="")=>{this.text=`${r}`};onRemove(){U(this.settings,"fontFace",this.onFontFaceChange),this._fontFace&&(U(this._fontFace,"texture",this.onFontTextureUpdate),U(this._fontFace,"font",this.onFontUpdate))}regenerateGeometry(){this.geometry=Je(this._text,this.settings),this.updateMeasurements()}updateMeasurements(){let r=this.geometry.boundingBox;this.width=r.max.x-r.min.x,this.height=Math.abs(r.max.y-r.min.y),this.userData.resolution=new D(this.width,this.height),this.onMeasurementsUpdated&&this.onMeasurementsUpdated(this)}},Yt=t=>{let e={layoutTexture:new h(Oe()),fontTexture:new h(t.fontFace.texture),color:new h(new je(t.color)),strokeColor:new h(new je(t.strokeColor)),fontSizeInChars:new h(new D(1,1)),layoutSizeInChars:new h(new D(1,1)),layoutSizeInCharColumns:new h(new D(1,1)),alignment:new h(new D(t.align,-t.vAlign))},r=e;if(t.screenSpace)if(r.prescale=new h(t.prescale),r.clipSpacePosition=new h(new Xt),t.pixelSizeInClipSpaceUniform)r.pixelSizeInClipSpace=t.pixelSizeInClipSpaceUniform;else throw new Error("You must provide a pixelSizeInClipSpaceUniform for screenSpace mode");return new Zt({defines:{USE_SCREENSPACE:t.screenSpace,CONSTANT_SIZE_ON_SCREEN:t.constantSizeOnScreen},uniforms:e,vertexShader:Be,fragmentShader:Ee,depthWrite:!0})},Ye=new Ke(.001,.001);Ye.computeBoundingBox();var de=new Ke(1,1),Qe=de.attributes.position,Ze=Qe.array;for(let t=0;t<Qe.count;t++){let e=t*3;Ze[e]+=.5,Ze[e+1]-=.5}de.computeBoundingBox();var Je=(t,e)=>e.fontFace.font&&t?de:Ye;import{FileLoader as Qt,LoadingManager as er,TextureLoader as qn}from"three";var tr=new er,xe;function rr(){return xe||(xe=new Qt(tr)),xe}async function q(t){return new Promise((e,r)=>rr().load(t,n=>e(n),void 0,r))}import{PerspectiveCamera as _r}from"three";import Pr from"threejs-camera-controller-first-person-desktop";import{PCFShadowMap as pr,sRGBEncoding as mr,WebGLRenderer as hr}from"three";import{Color as ir}from"three";import{Color as V,MeshBasicMaterial as lo}from"three";import{Plane as et,Ray as nr,Vector3 as ge}from"three";function c(t,e,r){return Math.min(r,Math.max(e,t))}var Jn=2*Math.PI,Kn=180/Math.PI,Yn=Math.PI/180;var Qn=new nr,eo=new et(new ge(0,-1,0),1),to=new et(new ge(0,-1,0),1),ro=new ge;function tt(t,e,r){let n=t+r*(e-t);return Math.abs(e-n)>1e-5?n:e}var no=Math.PI*2,oo=Math.PI*3;function $(t=1,e=0){return(Math.random()*2-1)*t+e}var or=(Math.sqrt(5)+1)*.5-1,io=or*Math.PI*2;var po=new V(1,1,1),mo=new V;function be(t){let e=/^#([A-Fa-f0-9]+)$/.exec(t);if(e){let r=e[1],n=r.length;if(n===3){let o=new V;return o.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,o.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,o.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,o}else if(n===6){let o=new V;return o.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,o.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,o.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,o}}return new V(1,0,1)}function A(t){return sr(t),new URL(window.location.href).searchParams.get(t)}function O(t){let e=A(t);return!!(e===""||e&&e!=="false")}function rt(t,e,r,n=-1/0,o=1/0){return c(r(A(t)||e.toString()),n,o)}function X(t,e,r=-1/0,n=1/0){return rt(t,e,parseFloat,r,n)}function we(t,e,r=-1/0,n=1/0){return rt(t,e,parseInt,r,n)}function nt(t,e){let r=A(t);if(!r){if(e instanceof ir)return e;r=e}return be("#"+r)}var Te=[],Ce=!1;function sr(t){Te.includes(t)||(Te.push(t),Ce||(Ce=!0,setTimeout(()=>{console.log("Nice Parameters to try: "+Te.join(", ")),Ce=!1},2e3)))}var ot=O("resetSettings"),Co={x:we("x",0),y:we("y",0)};var Se=class{width=1920;height=1080;aspect=1920/1080;deviceWidth=1920;deviceHeight=1080;deviceAspect=1920/1080;orientation="landscape";pixelRatio=1;targetFPS=60;useTouch=!1;type="desktop";listeners=new Set;cachedPPCm=-1;constructor(){window.addEventListener("resize",()=>{this.handleChange(),setTimeout(this.handleChange,50)}),this.handleChange()}handleChange=()=>{this.useTouch=/Mobi|Android|iPhone|iPad|BlackBerry|Windows Phone|webOS/i.test(navigator.userAgent),!(this.width===window.innerWidth&&this.height===window.innerHeight)&&(this.width=window.innerWidth,this.height=window.innerHeight,this.aspect=this.width/this.height,this.deviceHeight=Math.min(this.width,this.height),this.deviceWidth=Math.max(this.width,this.height),this.deviceAspect=this.deviceWidth/this.deviceHeight,this.pixelRatio=window.devicePixelRatio,this.orientation=this.aspect<1?"portrait":"landscape",this.type=this.useTouch?this.deviceWidth<1024&&this.deviceAspect>1.6?"mobile":"tablet":"desktop",this.listeners.forEach(e=>e()))};onChange(e,r=!1){return this.listeners.add(e),r&&e(),()=>this.listeners.delete(e)}get isMobile(){return this.type==="mobile"}get isTablet(){return this.type==="tablet"}get isDesktop(){return this.type==="desktop"}get pixelsPerCm(){if(this.cachedPPCm===-1){let e=document.createElement("div");e.style.height="1in";let r=document.getElementsByTagName("body")[0];r.appendChild(e);let n=getComputedStyle(e,null).getPropertyValue("height");r.removeChild(e),this.cachedPPCm=parseFloat(n)*2.54}return this.cachedPPCm}get screenHeightCms(){return this.height/this.pixelsPerCm}get screenWidthCms(){return this.width/this.pixelsPerCm}get screenShorterCms(){return Math.min(this.width,this.height)/this.pixelsPerCm}setFPS(e=60){this.targetFPS=e}},it=new Se;window.device=it;var i=it;import{Uniform as Z,Vector2 as ar}from"three";var st=new Z(0),ye=new Z(i.pixelRatio),J=new Z(new ar(2/i.width,2/i.height)),cr=new Z(i.width/i.height);i.onChange(()=>{cr.value=i.width/i.height});var K=(t,e,r=!1)=>{let n=t.indexOf(e);if(n!==-1)t.splice(n,1);else if(r)throw new Error("could not find value in array");return e};import{Vector3 as Uo}from"three";function lr(t){return localStorage.getItem(t)}function ur(t,e,r,n=-1/0,o=1/0){return c(r(lr(t)||e.toString()),n,o)}function at(t,e,r=-1/0,n=1/0){return ur(t,e,parseFloat,r,n)}var ct=[],Y=class{name;label;defaultValue;minValue;maxValue;step;sliderOrderPriority;distribution;valueTextConverter;_availableToUserMethod;_value;_listeners;constructor(e,r,n,o,a,l,I,s,p=!1,m=.01,u=0){this.name=e,this.label=r,this.defaultValue=n,this.minValue=o,this.maxValue=a,this.step=m,this.distribution=l,this.valueTextConverter=I,this._availableToUserMethod=s===!0||s===!1?()=>s:s,this._listeners=[],p&&(this.value=this.defaultValue),this._value=at("nice-param-"+e,n,o,a);let f=X(e,this._value,o,a);f!==this._value&&(this.value=f),ct.push(this),u===0&&(u=ct.length),this.sliderOrderPriority=u}listen(e){this._listeners.push(e),e(this.value)}stopListening(e){K(this._listeners,e)}set value(e){e!==this._value&&(e=c(e,this.minValue,this.maxValue),e!==this._value&&(this._value=e,localStorage.setItem("nice-param-"+this.name,String(e)),this._listeners.forEach(r=>r(e))))}get value(){return this._value}get availableToUser(){return this._availableToUserMethod()}};var lt=document.createElement("canvas"),b=new hr({canvas:lt,antialias:!0,premultipliedAlpha:!1});document.body.append(lt);var fr=["-moz-crisp-edges","-webkit-crisp-edges","pixelated","crisp-edges"];fr.forEach(t=>{let e=b.getContext().canvas;e instanceof HTMLCanvasElement&&e.style.setProperty("image-rendering",t)});b.shadowMap.enabled=!0;b.shadowMap.type=pr;b.outputEncoding=mr;b.autoClear=!1;var dr=new Y("pixel-down-sample","Graphics Quality",6,0,10,t=>t,t=>t+"",!0,ot,1),ut=1;function pt(){let t=i.pixelRatio/ut;ye.value=t,b.setPixelRatio(t)}dr.listen(t=>{ut=Math.round(t+1),pt()});i.onChange(()=>{pt();let{width:t,height:e}=i;b.setSize(t,e),ye.value=i.pixelRatio,J.value.set(2/t,2/e)},!0);var jo=Math.min(8192,b.capabilities.maxTextureSize),G=b;import{Euler as xr,PerspectiveCamera as gr}from"three";var br=.1,Tr=200,Cr=6e3,mt=35,ht=28,ve=class{constructor(e){this.camera=e;this._time=0,this._timers=[],this._shakeScale=25e-5,this._shakeStrength=0;let r=e.clone();r.position.set(0,0,0),r.quaternion.setFromEuler(new xr(0,0,0)),r.scale.set(1,1,1),e.add(r),this.shakyCamera=r}set shakeStrength(e){e=c(e,0,1),e!==this._shakeStrength&&(this._shakeStrength=e)}set shakeScale(e){e=c(e,0,10),e!==this._shakeScale&&(this._shakeScale=e)}shakyCamera;_time;_timers;_shakeStrength;_shakeScale;updateProjection(){this.shakyCamera.fov=this.camera.fov,this.shakyCamera.aspect=this.camera.aspect,this.shakyCamera.updateProjectionMatrix()}update(e){if(this._time+=e,this.shakeStrength=this._shakeStrength+e/br*(this._timers.length>0?12:-1),this._shakeStrength>0){this.shakyCamera.position.set(0,0,0);let r=1;for(let n=Tr;n<Cr;n*=1.674,r*=.8){let o=1/r*this._shakeScale*this._shakeStrength;this.shakyCamera.position.x+=Math.sin(this._time*n)*o,this.shakyCamera.position.y+=Math.sin(this._time*n*1.235)*o,this.shakyCamera.position.z+=Math.sin(this._time*n*1.67235)*o}}for(;this._timers.length>0&&this._timers[0]<=this._time;)this._timers.shift()}add(e){this._timers.push(this._time+e),this._timers.sort()}},Q=new gr(i.isMobile?ht:mt,i.aspect,.01,10),P=new ve(Q);i.onChange(()=>{Q.fov=i.isMobile?ht:mt,Q.aspect=i.aspect,Q.updateProjectionMatrix(),P.updateProjection()});var _e=[],wr=t=>{for(let e of _e)e.update(t)},Sr=t=>{_e.push(t)},yr=t=>{K(_e,t)},vr={update:wr,register:Sr,unregister:yr},ee=vr;var Mr=X("camDamping",0,0,.999),te=1-c(Mr,0,1);function Fr(t,e){t.position.copy(e.position),t.scale.copy(e.scale),t.quaternion.copy(e.quaternion),t.fov=e.fov}var M=class{constructor(e){this._camera=e}_active=!1;_cameraLocal=new _r;_fpsController=void 0;toggle(e){e===void 0&&(e=!this._active),this._fpsController||(Fr(this._cameraLocal,this._camera),this._camera.parent.add(this._cameraLocal),this._fpsController=new Pr(this._cameraLocal,G.domElement,{movementSpeed:.01}),ee.register(this));let r=this._fpsController.onPointerLockAttainSignal,n=r._bindings[0]._listener;r._bindings[0]._listener=()=>{this._active&&n()},e||this._fpsController.onPointerLockReleaseSignal.dispatch(),this._active=e}update(){this._active&&this._fpsController&&(this._fpsController.update(),this._camera.position.lerp(this._cameraLocal.position,te),this._camera.quaternion.slerp(this._cameraLocal.quaternion,te),this._camera.scale.lerp(this._cameraLocal.scale,te),this._camera.fov=tt(this._camera.fov,this._cameraLocal.fov,te),P.updateProjection())}},si=new M(P.camera);import{Color as Ir,Fog as Lr,PerspectiveCamera as Ur,Scene as Ar}from"three";var ft=35,dt=28,E=class{autoClear=!0;scene;camera;bgColor;constructor(){let e=new Ar,r=nt("bgColor",new Ir(7308476));e.fog=new Lr(r.getHex(),0,60),e.autoUpdate=!1,e.matrixAutoUpdate=!1,e.frustumCulled=!0;let n=new Ur(i.isMobile?dt:ft,i.aspect,.1,100);n.position.set(0,2,2),n.lookAt(0,0,0),e.add(n),i.onChange(()=>{n.fov=i.isMobile?dt:ft,n.aspect=i.aspect,n.updateProjectionMatrix()},!0),this.scene=e,this.camera=n,this.bgColor=r,this.scene.background=this.bgColor}update(e){this.scene.updateMatrixWorld(!1)}render(e,r){this.autoClear&&!e.autoClear&&(e.setClearColor(this.bgColor,1),e.clear(!0,!0,!0)),e.render(this.scene,this.camera)}};function Or(t,e){return`books/${t}.${e}`}var F=class extends E{constructor(){super(),this.camera.position.set(0,0,.5),this.camera.lookAt(0,0,0);let e=new M(this.camera);O("fpsCam")&&e.toggle(!0),(async()=>{let n="Hello world.";n=await q(Or("augustine-confessions-276","txt"));let o=new _(n,{align:0,vAlign:0,fontFace:new g("pixelFonts/good_neighbors",11,16),color:new xt(1,1,1),letterSpacing:-1,strokeColor:new xt(0,0,0),scaleDownToPhysicalSize:!0,screenSpace:!1,constantSizeOnScreen:!1,prescale:1},void 0,(a,l)=>{o.scale.x=.01*a,o.scale.y=.01*l});o.position.set(-.125,0,0),this.scene.add(o)})()}update(e){super.update(e)}render(e,r){super.render(e,r)}};import{Color as gt}from"three";function Er(t,e){return`books/${t}.${e}`}var N=class extends E{constructor(){super(),this.camera.position.set(0,0,.5),this.camera.lookAt(0,0,0);let e=new M(this.camera);O("fpsCam")&&e.toggle(!0),(async()=>{let n="Hello world.";n=await await q(Er("augustine-confessions-276","txt")),n=n.replace(/[^\w\s\']|_/g,"").replace(/\s+/g," "),n=n.replace(/[0-9]/g,""),n=n.toLowerCase(),n=n.replace(/['"]+/g,"");let o=n.split(`
`).join(" ").split(" ").filter(s=>!!s),a=new Set(o);console.log(o.length),console.log(a.size);let l=Array.from(a.values()).slice(0,1e3),I={align:.5,vAlign:.5,fontFace:new g("pixelFonts/good_neighbors",11,16),color:new gt(1,1,1),letterSpacing:-1,strokeColor:new gt(0,0,0),scaleDownToPhysicalSize:!0,screenSpace:!0,constantSizeOnScreen:!1,pixelSizeInClipSpaceUniform:J,prescale:10};for(let s of l){let p=new _(s,I,void 0,(m,u)=>{p.scale.x=.01*m,p.scale.y=.01*u});p.position.set($(1),$(1),$(1)).normalize().multiplyScalar(.3),this.scene.add(p)}})()}update(e){super.update(e)}render(e,r){super.render(e,r)}};var Pe={pixelText:F,manyLabels:N};var Me=[];function bt(){Me.length>0&&(Me.forEach(t=>t()),Me.length=0)}document.addEventListener("gesturestart",t=>t.preventDefault());var Dr=new Rr;G.setClearColor(new zr(3425622),1);P.camera.position.set(0,.5,.5);P.camera.lookAt(new kr);var St=F,Tt=A("test")||"pixelText";Pe.hasOwnProperty(Tt)&&(St=Pe[Tt]);var Ct=new St,Vr=parseInt(A("nthFrame")||"1"),wt=0,Fe=0,Ie=()=>{wt++;let t=Dr.getDelta();if(Fe+=t,bt(),ee.update(t),st.value+=t,Ct.update(t),wt%Vr!==0){requestAnimationFrame(Ie);return}Ct.render(G,Fe),Fe=0,requestAnimationFrame(Ie)};requestAnimationFrame(Ie);
//# sourceMappingURL=index.js.map
